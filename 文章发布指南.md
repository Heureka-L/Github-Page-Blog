# 文章发布指南

本指南详细介绍了如何在当前博客系统中发布和管理文章，包括页面布局、导航设计和功能特性。

## 📋 目录

1. [系统概述](#系统概述)
2. [文章发布流程](#文章发布流程)
3. [页面布局说明](#页面布局说明)
4. [导航设计规范](#导航设计规范)
5. [功能特性详解](#功能特性详解)
6. [样式定制指南](#样式定制指南)
7. [常见问题解答](#常见问题解答)

## 🎯 系统概述

本博客系统基于Jekyll构建，采用响应式设计，支持中英文双语切换，具备以下核心特性：

- **书籍式阅读体验**：文章采用书籍风格布局
- **智能导航系统**：顶部导航栏根据页面类型动态变化
- **内容管理系统**：支持书籍目录和文章分类管理
- **响应式设计**：适配桌面、平板、手机多种设备

## ✍️ 文章发布流程

### 1. 创建文章文件

在 `_posts/` 目录下创建新的Markdown文件，命名格式：
```
YYYY-MM-DD-文章标题.md
```

### 2. 文章头部配置（新格式）

每篇文章必须包含YAML前置数据，书籍文章使用新的自动分类格式：

```yaml
---
layout: book        # 使用书籍布局
title: "文章标题"
subtitle: "副标题"
date: YYYY-MM-DD HH:MM:SS
author: "作者名"
book: "书籍名称"      # 必填：所属书籍
chapter: "第1章"    # 必填：所属章节
section: "1.1"      # 可选：章节小节
tags: [标签1, 标签2]
---
```

### 3. 自动分类机制

系统会根据文章头部的书籍信息自动进行分类：
- **按书籍分组**：所有相同`book`值的文章自动归为一组
- **按章节排序**：同一书籍内的文章按`chapter`和`section`排序
- **自动生成目录**：无需手动维护books.yml文件
- **实时更新**：新增文章立即生效，无需额外配置

### 3. 内容编写规范

- **标题层级**：使用`#`到`######`表示1-6级标题
- **代码块**：使用三个反引号```包裹代码
- **数学公式**：使用`$$`包裹LaTeX公式
- **图片**：使用标准Markdown语法`![描述](路径)`

## 📖 页面布局说明

### 新的自动分类系统

#### 书籍页面（books.html）
- **自动分组**：按文章头部的`book`字段自动分组
- **章节排序**：按`chapter`和`section`字段排序
- **实时更新**：无需手动维护配置文件
- **日期显示**：显示文章发布时间

#### 文章页面（book.html）
- **书籍信息**：文章顶部显示所属书籍、章节、小节
- **导航按钮**：HOME / FOLLOW ME / CONTENT（已加粗）
- **响应式设计**：适配不同屏幕尺寸

### 文章头部示例

```yaml
---
layout: book
title: "STM32定时器标准库配置流程"
subtitle: "详细讲解STM32标准库中定时器的配置方法"
date: 2025-08-18 14:30:00
author: "Heureka"
book: "STM32开发指南"
chapter: "第2章"
section: "2.1"
tags: [STM32, 定时器, 标准库, 嵌入式]
---
```

## 🧭 导航设计规范

### 书籍导航按钮（已更新）

**按钮样式：**
- 字体加粗（font-weight: 700）✅
- 椭圆虚线边框
- 悬停颜色变化效果
- 文章顶部显示

**按钮功能：**
- **HOME** - 返回网站首页
- **FOLLOW ME** - 跳转到关于页面
- **CONTENT** - 跳转到书籍目录页面

### 书籍信息展示

**新格式：**
- 位置：文章标题下方
- 格式：📚 书籍名称 · 章节 · 小节
- 样式：灰色文字，图标装饰
- 自动读取：从文章头部YAML获取

### 响应式设计

**断点设置：**
- 桌面端：> 768px
- 平板端：481px - 768px
- 手机端：< 480px

**适配规则：**
- 桌面端：顶部导航按钮横向排列
- 移动端：导航按钮垂直排列
- 字体大小：16px基础，14px小屏

## ⚡ 功能特性详解

### 新的自动分类系统（已更新）

**实现原理：**
- 从文章头部YAML读取书籍信息
- 使用Liquid模板自动分组排序
- 无需手动维护books.yml文件
- 实时更新，新增文章立即生效

**数据结构：**
```
书籍（book字段）
├── 章节（chapter字段）
│   ├── 小节（section字段）
│   │   └── 文章（post）
```

### 书籍信息展示

**新特性：**
- 文章顶部显示书籍信息
- 格式：📚 书籍名称 · 章节 · 小节
- 自动从文章头部获取
- 响应式布局适配

### 导航按钮加粗

**已完成：**
- HOME、FOLLOW ME、CONTENT按钮文字已加粗
- font-weight: 700（原为500）
- 保持椭圆虚线边框设计
- 悬停效果正常

### 搜索与标签

**功能特点：**
- 全文搜索支持
- 标签云展示
- 自动分类页面
- 面包屑导航

## 🎨 样式定制指南

### 导航按钮样式（已更新）

当前文章页面的导航按钮使用统一样式：

```css
.book-nav-btn {
    padding: 6px 12px;
    border: 1px dashed #bdc3c7;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 700;  /* 加粗文字 */
    color: #7f8c8d;
    text-decoration: none;
    transition: all 0.3s ease;
}

.book-nav-btn:hover {
    color: #3498db;
    border-color: #3498db;
}
```

### 颜色方案

- **主色调**：#3498db（蓝色）
- **文字色**：#333333（深灰色）
- **链接色**：#3498db（蓝色）
- **书籍信息文字**：#666666（灰色）
- **辅助色**：#e0e0e0（浅灰）
- **背景色**：#1a1a1a（黑色，书籍页面专用）
- **边框色**：#bdc3c7（中性灰）

### 书籍信息样式

```css
.book-info {
    color: #666;
    font-size: 0.9em;
    margin: 10px 0;
}

.book-info i {
    color: #3498db;
    margin-right: 5px;
}
```

## ❓ 常见问题解答

### Q1: 如何创建新的书籍？（已更新）

**新方法（推荐）：**
直接在文章头部添加书籍信息：
```yaml
book: "新书名称"
chapter: "第1章"
section: "1.1"
```
系统会自动：
- 创建新的书籍分组
- 按章节排序
- 生成书籍目录
- 无需手动配置

### Q2: 如何修改书籍顺序？（已更新）

通过修改文章头部的章节信息：
```yaml
chapter: "第3章"  # 修改章节号改变排序
section: "3.2"   # 修改小节号改变顺序
```

### Q3: 如何让文章不显示在书籍中？（已更新）

**方法1：** 使用普通post布局：
```yaml
layout: post
```

**方法2：** 不添加book字段

### Q4: 如何修改导航按钮加粗样式？（已更新）

已完成：HOME、FOLLOW ME、CONTENT按钮文字已加粗
如需调整：编辑 `book.html` 文件中的 `.book-nav-btn` 类：

```css
.book-nav-btn {
    font-weight: 700; /* 已设置为加粗 */
    border-radius: 20px;
    /* 其他样式... */
}
```

### Q5: 如何添加书籍信息到文章？（新功能）

在文章头部YAML中添加：
```yaml
book: "书籍名称"
chapter: "第1章"
section: "1.1"    # 可选
```

文章顶部会自动显示：📚 书籍名称 · 第1章 · 1.1

### Q6: 旧版books.yml文件还有用吗？（已废弃）

**回答：** 不再需要！
- 系统已改为从文章头部读取信息
- 可以安全删除 `_data/books.yml` 文件
- 所有书籍信息现在由文章自动提供

## 🔧 技术栈说明

- **静态站点生成器**：Jekyll
- **样式框架**：Bootstrap 3 + 自定义CSS
- **构建工具**：Grunt
- **部署平台**：GitHub Pages
- **数学渲染**：MathJax
- **搜索功能**：Simple Jekyll Search

## 📞 技术支持

如遇到技术问题，请检查：
1. 本地环境：运行 `bundle exec jekyll serve`
2. 构建状态：查看GitHub Actions工作流
3. 样式调试：使用浏览器开发者工具
4. 内容更新：确保文件已正确提交

---

*最后更新：2025年1月*
*版本：v2.1 - 包含书籍式布局和黑色主题导航*